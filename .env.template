# =============================================================================
# TOURNAMENT API OPTIMIZATION CONFIGURATION
# =============================================================================
# This configuration is optimized for the Fall 2025 AI Benchmark Tournament
# with a $100 budget using the provided OpenRouter API key.

# =============================================================================
# REQUIRED API KEYS
# =============================================================================

# Metaculus API token for tournament participation
METACULUS_TOKEN=your_metaculus_token_here

# Primary API key - OpenRouter with $100 credit (provided by Metaculus)
# This is your main LLM provider for the tournament
OPENROUTER_API_KEY=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

# =============================================================================
# OPTIONAL FALLBACK API KEYS
# =============================================================================
# These are fallback options if the primary OpenRouter key fails
# Leave blank if not available - the system will gracefully degrade

PERPLEXITY_API_KEY=
OPENAI_API_KEY=
EXA_API_KEY=
ASKNEWS_CLIENT_ID=
ASKNEWS_SECRET=
ANTHROPIC_API_KEY=

# Tournament Configuration
PUBLISH_REPORTS=true
AIB_TOURNAMENT_ID=32813
TOURNAMENT_MODE=true
DRY_RUN=false
TOURNAMENT_NAME=Fall 2025 AI Benchmark Tournament
SKIP_PREVIOUSLY_FORECASTED=true
MAX_RESEARCH_REPORTS_PER_QUESTION=1
MAX_PREDICTIONS_PER_REPORT=5

# Metaculus Proxy Configuration
ENABLE_PROXY_CREDITS=true
METACULUS_DEFAULT_MODEL=metaculus/claude-3-5-sonnet
METACULUS_SUMMARIZER_MODEL=metaculus/gpt-4o-mini
METACULUS_RESEARCH_MODEL=metaculus/gpt-4o
MAX_PROXY_REQUESTS=1000

# AskNews Tournament Configuration
ASKNEWS_QUOTA_LIMIT=9000
ASKNEWS_DAILY_LIMIT=500

# =============================================================================
# BUDGET MANAGEMENT CONFIGURATION
# =============================================================================
# Critical settings for staying within the $100 tournament budget

# Total budget limit in USD (DO NOT EXCEED)
BUDGET_LIMIT=100.0

# Enable comprehensive cost tracking and monitoring
COST_TRACKING_ENABLED=true

# Budget utilization thresholds for operation mode switching
CONSERVATIVE_MODE_THRESHOLD=0.80  # Switch to cost-saving mode at 80% budget used
EMERGENCY_MODE_THRESHOLD=0.95     # Emergency mode at 95% budget used

# Budget alert system configuration
BUDGET_ALERT_ENABLED=true
BUDGET_ALERT_THRESHOLDS=0.50,0.75,0.90,0.95  # Alert at 50%, 75%, 90%, 95%

# Cost control settings
MAX_COST_PER_QUESTION=2.00        # Maximum spend per question (safety limit)
DAILY_BUDGET_LIMIT=5.00           # Maximum daily spend (optional safety limit)

# =============================================================================
# TRI-MODEL GPT-5 CONFIGURATION
# =============================================================================
# Strategic cost-performance triangle with GPT-5 variants

# GPT-5 Full - Maximum reasoning power for final forecasting decisions
DEFAULT_MODEL=gpt-5                          # $1.50/1M tokens - complex analysis, final predictions

# GPT-5 Mini - Balanced speed/intelligence for research synthesis
MINI_MODEL=gpt-5-mini                        # $0.25/1M tokens - research, intermediate reasoning

# GPT-5 Nano - Ultra-fast, cheapest for validation and parsing
NANO_MODEL=gpt-5-nano                        # $0.05/1M tokens - validation, simple summaries

# =============================================================================
# LEGACY MODEL FALLBACKS (if GPT-5 not available)
# =============================================================================
# Fallback to GPT-4 variants if GPT-5 models are not accessible

# Research tasks (information gathering, summarization)
PRIMARY_RESEARCH_MODEL=openai/gpt-4o-mini    # Cost-effective for research

# Critical forecasting decisions (final predictions)
PRIMARY_FORECAST_MODEL=openai/gpt-4o         # Higher accuracy for predictions

# Simple tasks (basic processing)
SIMPLE_TASK_MODEL=openai/gpt-4o-mini        # Most cost-effective

# Emergency fallback when budget is critical
EMERGENCY_FALLBACK_MODEL=openai/gpt-4o-mini # Cheapest option for emergencies

# Operation Mode Configuration
OPERATION_MODE=auto
ENABLE_COMPLEXITY_ANALYSIS=true
ENABLE_ADAPTIVE_MODEL_SELECTION=true
MAX_COST_PER_QUESTION=2.00
MAX_TOKENS_PER_TASK=2000

# Error Handling and Fallback Configuration
MAX_API_FAILURES=5
ENABLE_EMERGENCY_MODE=true
ENABLE_GRACEFUL_DEGRADATION=true
API_RETRY_ATTEMPTS=3
API_RETRY_DELAY_SECONDS=2

# =============================================================================
# TOURNAMENT SCHEDULING OPTIMIZATION
# =============================================================================
# Optimized scheduling for tournament scope and budget efficiency

# Standard scheduling frequency (reduced from 30min to 4h for budget efficiency)
SCHEDULING_FREQUENCY_HOURS=4

# Enable smart scheduling based on question deadlines
DEADLINE_AWARE_SCHEDULING=true

# Increased frequency during critical periods
CRITICAL_PERIOD_FREQUENCY_HOURS=2    # More frequent near deadlines
FINAL_24H_FREQUENCY_HOURS=1          # Hourly in final 24 hours

# Tournament scope (seasonal, not daily)
TOURNAMENT_SCOPE=seasonal

# Tournament Scope Management Configuration
TOURNAMENT_START_DATE=2025-09-01
TOURNAMENT_END_DATE=2025-12-31
EXPECTED_TOTAL_QUESTIONS=75
MIN_EXPECTED_QUESTIONS=50
MAX_EXPECTED_QUESTIONS=100
QUESTIONS_PROCESSED=0
SUSTAINABLE_DAILY_RATE=1.0

# =============================================================================
# CONFIGURATION DOCUMENTATION
# =============================================================================

# For detailed setup instructions, see: docs/TOURNAMENT_SETUP_GUIDE.md
# For budget management details, see: docs/BUDGET_MANAGEMENT_IMPLEMENTATION.md
# For troubleshooting, see: docs/TOURNAMENT_SETUP_GUIDE.md#troubleshooting

# QUICK SETUP CHECKLIST:
# 1. Replace METACULUS_TOKEN with your actual token
# 2. Verify OPENROUTER_API_KEY is correct (provided by Metaculus)
# 3. Confirm BUDGET_LIMIT=100.0 (DO NOT EXCEED)
# 4. Run: python scripts/check_env.py
# 5. Test: python scripts/test_budget_management.py

# BUDGET SAFETY NOTES:
# - The bot will automatically switch to conservative mode at 80% budget
# - Emergency mode activates at 95% budget to prevent overspending
# - Monitor budget status in logs/budget_alerts.json
# - Set MAX_COST_PER_QUESTION lower if you want extra safety

# TOURNAMENT OPTIMIZATION NOTES:
# - Scheduling reduced to every 4 hours for budget efficiency
# - Expected 50-100 questions total (seasonal scope)
# - Tri-model GPT-5 strategy: nano for validation, mini for research, full for forecasts
# - Anti-slop directives ensure quality and prevent hallucinations
# - Budget-aware routing: 70% cost reduction vs single-model approach
# - Strategic model usage: ~2000 questions vs ~300 with GPT-5 full only
# - Automatic calibration and overconfidence reduction enabled
